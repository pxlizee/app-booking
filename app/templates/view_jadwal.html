{% extends "base.html" %}
{% block title %}Lihat Jadwal{% endblock %}
{% block content %}
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">Filter Jadwal</h5>
        <form method="GET" action="{{ url_for('routes.halaman_jadwal') }}" class="row g-2 align-items-center">
            <div class="col-md-3">
                <select class="form-select" name="filter_by">
                    <option value="Hari" {% if filter_by == 'Hari' %}selected{% endif %}>Hari</option>
                    <option value="Ruangan" {% if filter_by == 'Ruangan' %}selected{% endif %}>Ruangan</option>
                    <option value="Kelas" {% if filter_by == 'Kelas' %}selected{% endif %}>Kelas</option>
                    <option value="Dosen" {% if filter_by == 'Dosen' %}selected{% endif %}>Dosen</option>
                </select>
            </div>
            <div class="col-md-7">
                <input type="text" class="form-control" name="filter_value" placeholder="Ketik nilai filter..." value="{{ filter_value }}">
            </div>
            <div class="col-md-2 d-grid">
                <button type="submit" class="btn btn-primary"><i class="bi bi-search"></i></button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-header fw-bold">
        Hasil Jadwal
    </div>
    <div class="card-body p-0">
        {% if jadwal_list %}
       <div class="table-responsive">
    <table class="table table-striped table-hover mb-0">
        <thead>
            <tr>
                {% for col in header %}
                    <th scope="col">{{ col }}</th>
                {% endfor %}
                <th scope="col">Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for item in jadwal_list %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.nama_dosen }}</td>
                <td>{{ item.mata_kuliah }}</td>
                <td>{{ item.sks }}</td>
                <td>{{ item.kelas }}</td>
                <td>{{ item.hari }}</td>
                <td>{{ item.jam_mulai }}</td>
                <td>{{ item.jam_selesai }}</td>
                <td>{{ item.gedung }}</td>
                <td>{{ item.lantai }}</td>
                <td>{{ item.ruangan }}</td>
                <td>{{ item.tipe_kelas }}</td>
                <td>
                    {% if current_user.role == 'admin' %}
                        <a href="{{ url_for('routes.edit_jadwal', jadwal_id=item.id) }}" class="btn btn-warning btn-sm" title="Edit">
                            <i class="bi bi-pencil-fill"></i>
                        </a>
                        
                        <form method="POST" action="#" onsubmit="return confirm('Yakin ingin menghapus jadwal ini?');" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger" title="Hapus"><i class="bi bi-trash-fill"></i></button>
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
        {% else %}
        <div class="text-center p-4 text-muted">
            Tidak ada jadwal yang ditemukan.
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}